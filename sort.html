<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>快速排序</title>
    </head>
    <body>
        <div class="">
            <dl class="">
                快速排序
            </dl>
            <ul>
                <li>arr = [1,98,45,63,53,23,3,67,55,99]</li>
                <li>选中一个基准，大于这个基准的数字在右边，小于这个基准的数字左边</li>
                <li>递归数组，直到数组中只有一个元素</li>
            </ul>
            <dl class="">
                扁平化数组 
            </dl>
            <ul>
                <li>arr2 = [1,[2,3],[3,4,5]]</li>
                <li>根据instanceof属性判断当前元素是不是数组</li>
                <li>如果是数组递归当前方法</li>
            </ul>
            <dl>
                二分查找
            </dl>
            <ul>
                <li></li>
            </ul>
        </div>
        <script type="text/javascript">
            // 快速排序
            function quickSort(arr) {
                if (arr.length <= 1) {
                    return arr;
                }
                let length = arr.length;
                let pivotIndex = Math.floor(length/2);
                let pivot = arr.splice(pivotIndex, 1)[0];
                let left = []; //左边
                let right = [];

                for (let i = 0; i < length-1; i++) {
                    if(arr[i] < pivot) {
                        left.push(arr[i]);
                    }else {
                        right.push(arr[i]);
                    }
                }

                return quickSort(left).concat([pivot],quickSort(right));

            }

            let arr = [1,98,45,63,53,34,23,3,67,55,99];
            console.log(quickSort(arr));
            console.log([...new Set([1,98,45,63,53,34,23,3,67,55,99])])


            //扁平化数组 方法一
            let arr2 = [1,[2,3],[3,[4,5]]];
            function bianping1(arr,ret = []) {
                for(let i = 0;i<arr.length;i++){
                    if(arr[i] instanceof Array){
                        bianping1(arr[i],ret);
                    }else {
                        ret.push(arr[i]);
                    }
                }
                return ret;
            }
            console.log(bianping1(arr2)); //[1,2,3,3,4,5]
            // reduce
            function bianping2(arr) {
                return arr.reduce((result, item)=> {
                    return result.concat(Array.isArray(item) ? bianping2(item) : item);
                }, []);
            }
            console.log(bianping2(arr2));

            // ... 扩展运算符
            function bianping3(arr) {
                // while遍历直到arr中没有数组 some存在符合条件的则为true
                while(arr.some(item=>Array.isArray(item))) {
                    arr = [].concat(...arr);
                }
                return arr;
            }
            console.log('es6 ...',bianping3(arr2));

            //  join & split
            function bianping4(arr) {
                return arr.join(',').split(',').map(item => {
                    return parseInt(item)
                })
            }
            console.log('join & split', bianping4(arr2))

            // es6 flat
            console.log('es6 flat',arr2.flat(Infinity))

            // 冒泡排序
            const maopao = (arr) => {
              for(let i = 0; i < arr.length;  i++){
                for(let j = 0; j < arr.length - 1 -i; j++) {
                  if(arr[j] > arr[j+1]) {
                    let tmp = arr[j+1]
                    arr[j+1] = arr[j]
                    arr[j] = tmp
                  }
                }
              }
              return arr
            }
            console.log('maopao',maopao(arr))

            // 冒泡排序
            function bubleSort(arr) {
                var len = arr.length;
                for (let outer = len ; outer >= 2; outer--) {
                    for(let inner = 0; inner <=outer - 1; inner++) {
                        if(arr[inner] > arr[inner + 1]) {
                            [arr[inner],arr[inner+1]] = [arr[inner+1],arr[inner]]
                        }
                    }
                }
                return arr;
            }
            console.log(bubleSort(arr))


        </script>
    </body>
</html>
