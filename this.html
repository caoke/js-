<!DOCTYPE html>
<html>
<head>
	<title>this指向</title>
</head>
<body>
<script type="text/javascript">
	// function foo() {
	// 	console.log(this);  // {}
	// 	setTimeout(() => {  //箭头函数 固定this指向
	// 	   console.log('id:', this.id);
	// 	}, 100);
	// }

	//var id = 21;

	// foo.call({ id: 42 }); // id: 42

	function foo1 () {
		
		console.log(this); // 这里指向的是{id： 43}
		var id = 10;
		setTimeout(function(){
			console.log(this); // 这里指向的是window
			console.log(this.id);
		},100)
	}
	foo1.call({id:43});



var adder = {
  base : 1,
    
  add : function(a) {
    var f = v => v + this.base;
    return f(a);
  },

  addThruCall: function(a) {
    var f = v => v + this.base;
    var b = {
      base : 2
    };
            
    return f.call(b, a);
  },

  addThruCall2: function(a) {
    function f(v){
    	return v += this.base; 
    }
    var b = {
      base : 2
    };
            
    return f.call(b, a);
  }

};

console.log(adder.add(1));         // 输出 2
console.log(adder.addThruCall(1)); // 仍然输出 2（而不是3 ——译者注）
console.log(adder.addThruCall2(1)); // 输出 3


// 标准的闭包函数
// function A(){
//   	var i=0;
//   	return function b(){
//   	    return (++i);
//   	};
// };

// var v=A();
// v();    //1
// v();    //2


// //箭头函数体的闭包（ i=0 是默认参数）
// var Add = (i=0) => {
// 	return (
// 		() => (++i) 
// 	)
// };
// var v = Add();
// v();           //1
// v();           //2

// //因为仅有一个返回，return 及括号（）也可以省略
// var Add = (i=0)=> ()=> (++i);



</script>
</body>
</html>